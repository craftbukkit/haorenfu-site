# ═══════════════════════════════════════════════════════════════════════════════
#                          HAORENFU UNIVERSE
#                    Application Configuration
# ═══════════════════════════════════════════════════════════════════════════════
#
# This configuration file embraces simplicity and transparency.
# Every setting is documented and easily modifiable.
#
# Environment Variables:
#   - DATABASE_URL: PostgreSQL connection URL
#   - DATABASE_USER: Database username
#   - DATABASE_PASSWORD: Database password
#   - SERVER_PORT: HTTP port (default: 8080)
#   - MC_SERVER_HOST: Minecraft server address
#   - MC_SERVER_PORT: Minecraft server port
#
# ═══════════════════════════════════════════════════════════════════════════════

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                         APPLICATION SETTINGS                                   ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

spring.application.name=haorenfu-universe

# Active profile (dev enables sample data initialization)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:dev}

# Server Configuration
server.port=${SERVER_PORT:8080}
server.servlet.session.timeout=30m
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                         DATABASE CONFIGURATION                                 ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Default: H2 in-memory database for development
# Switch to PostgreSQL for production by setting environment variables

# H2 Configuration (Development)
spring.datasource.url=${DATABASE_URL:jdbc:h2:file:./data/haorenfu;DB_CLOSE_DELAY=-1;MODE=PostgreSQL}
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=${DATABASE_USER:sa}
spring.datasource.password=${DATABASE_PASSWORD:}

# H2 Console (Development only - disable in production)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Shanghai

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                           VAADIN SETTINGS                                      ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Production mode (set to true for deployment)
vaadin.productionMode=false

# Push configuration for real-time updates
vaadin.pushMode=automatic
vaadin.pushURL=

# Heart beat interval (seconds)
vaadin.heartbeatInterval=60

# Close idle sessions
vaadin.closeIdleSessions=true

# Development mode configuration
vaadin.devmode.liveReload.enabled=true

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                         SECURITY SETTINGS                                      ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Session configuration
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=${SECURE_COOKIE:false}
server.servlet.session.cookie.same-site=lax

# Remember me token validity (30 days in seconds)
app.security.remember-me.validity=2592000

# Password policy
app.security.password.min-length=8
app.security.password.require-uppercase=true
app.security.password.require-digit=true

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                      MINECRAFT SERVER SETTINGS                                 ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Primary Minecraft server
app.minecraft.server.host=${MC_SERVER_HOST:haorenfu.cn}
app.minecraft.server.port=${MC_SERVER_PORT:25565}
app.minecraft.server.name=好人服

# Server status check interval (milliseconds)
app.minecraft.status.check-interval=60000

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                          CACHING SETTINGS                                      ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Caffeine cache configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=10m

# Cache names
spring.cache.cache-names=users,posts,achievements,serverStatus

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                         LOGGING SETTINGS                                       ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Log levels
logging.level.root=INFO
logging.level.world.haorenfu=DEBUG
logging.level.org.springframework.security=INFO
logging.level.com.vaadin=INFO
logging.level.org.hibernate.SQL=DEBUG

# Log file configuration
logging.file.name=logs/haorenfu-universe.log
logging.file.max-size=10MB
logging.file.max-history=30
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                      COMMUNITY SETTINGS                                        ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Community information
app.community.name=好人服宇宙
app.community.description=一个和谐的 Minecraft 基友服
app.community.established=2013-05
app.community.qq-group=302805107

# Reputation system
app.reputation.post-created=5
app.reputation.comment-created=2
app.reputation.upvote-received=3
app.reputation.downvote-received=-2

# Forum settings
app.forum.posts-per-page=20
app.forum.comments-per-page=50
app.forum.max-post-length=50000
app.forum.max-comment-length=10000

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                      INTERNATIONALIZATION                                      ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Default locale
spring.messages.basename=messages
spring.messages.encoding=UTF-8

# Time zone
spring.jackson.time-zone=Asia/Shanghai

# ╔═══════════════════════════════════════════════════════════════════════════════╗
# ║                      ACTUATOR & MONITORING                                     ║
# ╚═══════════════════════════════════════════════════════════════════════════════╝

# Expose health and info endpoints
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.endpoint.health.probes.enabled=true

# Health checks
management.health.db.enabled=true
management.health.diskspace.enabled=true

# Application info
management.info.env.enabled=true
info.app.name=好人服宇宙
info.app.description=Minecraft社区平台
info.app.version=1.0.0
